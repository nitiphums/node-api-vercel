<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Interface</title>
</head>
<body>
  <h1>API Interface</h1>

  <!-- Home Route -->
  <h2>API Home</h2>
  <button onclick="callHome()">Call Home</button>
  <pre id="homeResponse"></pre>

  <!-- Create a Customer -->
  <h2>Create a Customer</h2>
  <form id="createCustomerForm">
    <input type="text" name="name" placeholder="Name" required><br>
    <input type="email" name="email" placeholder="Email" required><br>
    <input type="password" name="password" placeholder="Password" required><br>
    <input type="text" name="phone" placeholder="Phone" required><br>
    <button type="submit">Create Customer</button>
  </form>
  <pre id="createCustomerResponse"></pre>

  <!-- Get All Customers -->
  <h2>Get All Customers</h2>
  <button onclick="getCustomers()">Get All Customers</button>
  <pre id="allCustomersResponse"></pre>

  <!-- Get Single Customer -->
  <h2>Get Customer by ID</h2>
  <input type="text" id="customerId" placeholder="Customer ID">
  <button onclick="getCustomer()">Get Customer</button>
  <pre id="customerResponse"></pre>

  <!-- Top-Up Wallet -->
  <h2>Top-Up Wallet</h2>
  <input type="text" id="topupCustomerId" placeholder="Customer ID">
  <input type="number" id="walletTopup" placeholder="Top-up Amount">
  <button onclick="topupWallet()">Top-Up</button>
  <pre id="topupResponse"></pre>

  <!-- Add/Update Discount -->
  <h2>Add/Update Discount</h2>
  <input type="text" id="discountCustomerId" placeholder="Customer ID">
  <input type="number" id="rateDiscount" placeholder="Rate Discount">
  <button onclick="addDiscount()">Add Discount</button>
  <pre id="discountResponse"></pre>

  <!-- Make a Purchase -->
  <h2>Make a Purchase</h2>
  <input type="text" id="purchaseCustomerId" placeholder="Customer ID">
  <input type="text" id="productName" placeholder="Product Name">
  <input type="number" id="productPrice" placeholder="Product Price">
  <button onclick="makePurchase()">Purchase</button>
  <pre id="purchaseResponse"></pre>

  <!-- Get All Orders -->
  <h2>Get All Orders</h2>
  <button onclick="getAllOrders()">Get All Orders</button>
  <pre id="allOrdersResponse"></pre>

  <script>
    const apiBase = 'http://localhost:3000';

    // Call Home Route
    function callHome() {
      fetch(apiBase + '/')
        .then(response => response.text())
        .then(data => document.getElementById('homeResponse').innerText = data);
    }

    // Create a Customer
    document.getElementById('createCustomerForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const formData = new FormData(this);
      const data = {
        name: formData.get('name'),
        email: formData.get('email'),
        password: formData.get('password'),
        phone: formData.get('phone')
      };
      fetch(apiBase + '/customers', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      })
      .then(response => response.json())
      .then(data => document.getElementById('createCustomerResponse').innerText = JSON.stringify(data, null, 2));
    });

    // Get All Customers
    function getCustomers() {
      fetch(apiBase + '/customers')
        .then(response => response.json())
        .then(data => document.getElementById('allCustomersResponse').innerText = JSON.stringify(data, null, 2));
    }

    // Get a Single Customer by ID
    function getCustomer() {
      const customerId = document.getElementById('customerId').value;
      fetch(apiBase + '/customers/' + customerId)
        .then(response => response.json())
        .then(data => document.getElementById('customerResponse').innerText = JSON.stringify(data, null, 2));
    }

    // Top-Up Wallet
    function topupWallet() {
      const customerId = document.getElementById('topupCustomerId').value;
      const wallet_topup = document.getElementById('walletTopup').value;
      fetch(apiBase + '/customers/' + customerId + '/topup', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ wallet_topup })
      })
      .then(response => response.json())
      .then(data => document.getElementById('topupResponse').innerText = JSON.stringify(data, null, 2));
    }

    // Add/Update Discount
    function addDiscount() {
      const customerId = document.getElementById('discountCustomerId').value;
      const rate_discount = document.getElementById('rateDiscount').value;
      fetch(apiBase + '/customers/' + customerId + '/discount', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ rate_discount })
      })
      .then(response => response.json())
      .then(data => document.getElementById('discountResponse').innerText = JSON.stringify(data, null, 2));
    }

    // Make a Purchase
    function makePurchase() {
      const customerId = document.getElementById('purchaseCustomerId').value;
      const product_name = document.getElementById('productName').value;
      const product_price = document.getElementById('productPrice').value;
      fetch(apiBase + '/customers/' + customerId + '/purchase', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ product_name, product_price })
      })
      .then(response => response.json())
      .then(data => document.getElementById('purchaseResponse').innerText = JSON.stringify(data, null, 2));
    }

    // Get All Orders
    function getAllOrders() {
      fetch(apiBase + '/orders')
        .then(response => response.json())
        .then(data => document.getElementById('allOrdersResponse').innerText = JSON.stringify(data, null, 2));
    }
  </script>
</body>
</html>
